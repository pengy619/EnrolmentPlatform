<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="../../framework/layui/css/layui.css"> <link rel="stylesheet" href="https://at.alicdn.com/t/font_580083_hx34356fmwzmpldi.css"> <link rel="stylesheet" href="../../css/main.css"> <link rel="stylesheet" href="../../css/replace.css">
        <title>销售</title>
</head>

<body>
    <div class="container">
        <div class="top-wrap"><div class="logo">
    <img src="../../images/home_logo.png" alt="智联智行">
</div>
<div class="nav">
    <a href="../sell/sell-tickets.html" id="product">
        <i class="iconfont icon-chanpinpeizhi"></i>
        销售
    </a>
    <a href="../order/order-tickets.html" id="order">
        <i class="iconfont icon-dingdan"></i>
        订单
    </a>
    <a href="../finance/finance-list.html" id="finance">
        <i class="iconfont icon-baobiaotongji"></i>
        财务
    </a>
    <a href="../setting/roles-setting.html" id="setting">
        <i class="iconfont icon-shezhi"></i>
        设置
    </a>
</div></div>
        <div class="body-wrap">
            <div class="left-wrap">
                <ul class="layui-nav layui-nav-tree" lay-filter="test">
                    <li class="layui-nav-item active">
                        <a href="./sell-tickets.html">
                            <i class="iconfont icon-nongchanpin"></i>
                            <span>票务销售</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="container-wrap">
                <div class="breadcrumb-bar">
                    <div class="collapse-button" id="collapse-button">
                        <i class="layui-icon"></i>
                    </div>
                    <div class="breadcrumb-wrap">
                        <span class="layui-breadcrumb">
                            <a>
                                <cite>工作台</cite>
                            </a>
                            <a>
                                <cite>销售</cite>
                            </a>
                            <a>
                                <cite>票务销售</cite>
                            </a>
                        </span>
                    </div>
                    <div class="user-tools">
    <a href=""><i class="iconfont icon-dingdan"></i><span class="layui-badge">3</span></a>
    <a href=""><i class="iconfont icon-xiaoxi"></i></a>
    <a href=""><i class="iconfont icon-iconfontlipinduihuanbangzhu"></i></a>
    <span class="account">
        135*****753 <i class="layui-icon">&#xe625;</i> 
        <dl class="user-dropdown">
            <dd>
                <a href="">个人信息</a>
            </dd>
            <dd>
                <a href="">安全退出</a>
            </dd>
        </dl>
    </span>
</div>
                </div>
                <div class="main-wrap">
                    <div class="panel">
                        <div class="panel-title mode">
                            <div>
                                <span>查看模式</span>
                                <span>
                                    <a href="./sell-tickets-imgmode.html">
                                        <i class="iconfont icon-shuanglieliebiao  pro-color"></i>
                                    </a>
                                    <a href="./sell-tickets.html">
                                        <i class="iconfont icon-danlieliebiao"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                        <div class="panel-title">
                            <div class="ui-form">
                                <div class="layui-form-item ">
                                    <label class="layui-form-label">包含景点：</label>
                                    <div class="layui-input-block">
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>全部
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>隆里古城
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>黄果树瀑布
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>万峰林
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>梵净山
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-form-item ">
                                    <label class="layui-form-label">游乐项目：</label>
                                    <div class="layui-input-block">
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>全部
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>共享单车
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>篝火晚会
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>小火车
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>摩天轮
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>全部
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>共享单车
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>篝火晚会
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>小火车
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>摩天轮
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>全部
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>共享单车
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>篝火晚会
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>小火车
                                        </div>
                                        <div class="ui-checkbox">
                                            <input type="checkbox">
                                            <i class="iconfont checkicon"></i>摩天轮
                                        </div>
                                        <div class="more">
                                            <span>更多</span>
                                            <i class="iconfont icon-zelvgongyonggengduo1"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="layui-form">
                                <div class="layui-form-item ">
                                    <div class="layui-inline">
                                        <label class="layui-form-label">产品名称：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="" autocomplete="off" class="layui-input">
                                        </div>
                                        <label class="layui-form-label" style="width: auto">供应商类别：</label>
                                        <div class="layui-input-inline">
                                            <select name="city" lay-verify="required">
                                                <option value=""></option>
                                                <option value="0">北京</option>
                                                <option value="1">上海</option>
                                                <option value="2">广州</option>
                                                <option value="3">深圳</option>
                                                <option value="4">杭州</option>
                                            </select>
                                        </div>
                                        <label class="layui-form-label">供应商：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">产品编号：</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <button class="layui-btn layui-btn-warm">查询</button>
                                </div>
                            </div>
                            <div class="list-box">
                                <div class="info-box img-mode-style">
                                    <div class="img-box">
                                        <img src="../../images/timg.jpg" alt="">
                                    </div>
                                    <div class="text-box">
                                        <h3>隆里古城</h3>
                                        <div class="btn-box">
                                            <button class="layui-btn layui-btn-warm layui-btn-xs">5A级景区</button>
                                            <button class="layui-btn layui-btn-warm layui-btn-xs">山水田园</button>
                                        </div>
                                        <p>所在地址： 黔东南苗族侗族自治州锦屏县隆里乡二零二省道旁边</p>
                                        <p>开放时间：
                                            <span class="pro-color">8:30-17:30</span>
                                        </p>
                                    </div>
                                </div>
                                <table id="sell-table" lay-filter="table" class="tr-no-position"></table>
                            </div>
                            <div class="list-box">
                                <div class="info-box img-mode-style">
                                    <div class="img-box">
                                        <img src="../../images/timg.jpg" alt="">
                                    </div>
                                    <div class="text-box">
                                        <h3>隆里古城</h3>
                                        <div class="btn-box">
                                            <button class="layui-btn layui-btn-warm layui-btn-xs">5A级景区</button>
                                            <button class="layui-btn layui-btn-warm layui-btn-xs">山水田园</button>
                                        </div>
                                        <p>所在地址： 黔东南苗族侗族自治州锦屏县隆里乡二零二省道旁边</p>
                                        <p>开放时间：
                                            <span class="pro-color">8:30-17:30</span>
                                        </p>
                                    </div>
                                </div>
                                <table id="sell-table2" lay-filter="table" class="tr-no-position"></table>
                            </div>
                            <div class="page" id="page"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ui-shade"></div>
        <div class="ui-drawer">
            <div class="drawer-header">
                提交订单
            </div>
            <div class="drawer-body">

            </div>
            <div class="drawer-footer">
                <div onclick="submit(this)">提交订单</div>
                <div onclick="cancel(this)">取消</div>
            </div>
        </div>
    </div>

     <script src="../../framework/layui/layui.js"></script> <script src="../../js/common.js"></script>
        <!--表格按钮模板-->
        <script type="text/html" id="tableTool">
        <button class="layui-btn layui-btn-warm layui-btn-sm " lay-event="showTip">立即购买</button>
    </script>
        <!--表格产品名称模板-->
        <script type="text/html" id="nameTpl">
        <a href="javascript:;" class="layui-table-link" lay-event="detail">{{d.detail.name}}</a>
    </script>
        <!--表格产品详情模板-->
        <script type="text/html" id="detail">
        <tr class="tr-detail">
            <td colspan="10">
                <div style="padding:15px;">
                    <div class="table-row-box">
                        <div class="info-cell no-padding">
                            <div class="row">
                                <div class="item">
                                    <span class="label">包含景点</span>
                                    <span class="text">{{d.detail.desc0}}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="item">
                                    <span class="label">包含游乐项目</span>
                                    <span class="text">{{d.detail.desc1}}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="item">
                                    <span class="label">预定说明</span>
                                    <span class="text">{{d.detail.desc2}}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="item">
                                    <span class="label">使用说明</span>
                                    <span class="text">{{d.detail.desc3}}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="item">
                                    <span class="label"></span>
                                    <span class="text">{{d.detail.desc4}}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="item">
                                    <span class="label"></span>
                                    <span class="text">{{d.detail.desc5}}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="item">
                                    <span class="label">供应商</span>
                                    <span class="text">{{d.detail.desc6}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="box-footer">
                            <span onclick="closeDetail(this)">
                                收起 <i class="iconfont icon-zelvgongyonggengduo1"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    </script>
        <!--表格游玩日期模板-->
        <script type="text/html" id="dateTpl">
        <span class="imitate-input" lay-event="openCalendar">{{d.date}}</span>
    </script>
        <!--表格价格模板-->
        <script type="text/html" id="priceTpl">
        <span class="pro-color">{{d.price}}</span>
    </script>
        <!--表格数量模板-->
        <script type="text/html" id="countTpl">
        <div class="ui-counter" data-id="{{d.number}}">
            <span class="reduce">-</span>
            <input type="text" value="1"/>
            <span class="add">+</span>
        </div>
    </script>
        <!--右侧抽屉内容模板-->
        <script type="text/html" id="drawerBodyTpl">
        <div class="info-cell no-padding">
            <div class="row">
                <div class="item">
                    <span class="label">类别</span>
                    <span class="text">{{d.type}}</span>
                </div>
            </div>
            <div class="row">
                <div class="item">
                    <span class="label">产品名称</span>
                    <span class="text">{{d.detail.name}}</span>
                </div>
            </div>
            <div class="row">
                <div class="item">
                    <span class="label">票种</span>
                    <span class="text">{{d.ticket}}</span>
                </div>
            </div>
            <div class="row">
                <div class="item">
                    <span class="label">游玩日期</span>
                    <span class="text">{{d.date}}</span>
                </div>
            </div>
            <div class="row">
                <div class="item">
                    <span class="label">价格</span>
                    <span class="text">￥{{d.price}}</span>
                </div>
            </div>
            <div class="row">
                <div class="item">
                    <span class="label">数量</span>
                    <span class="text">{{d.count}}</span>
                </div>
            </div>
            <div class="row">
                <div class="item">
                    <span class="label">金额小计</span>
                    <span class="text pro-color">￥{{Number(d.price)*Number(d.count)}}</span>
                </div>
            </div>
        </div>
    </script>
        <script>
            //本页日历逻辑、交互逻辑略微复杂，请后端开发人员开发时联系qq826327700
            var tableData = [], currentRow = {}
            layui.use(['jquery', 'table', 'laytpl', 'element', 'laypage'], function () {
                var table = layui.table;
                $ = layui.$;
                var laytpl = layui.laytpl;
                var element = layui.element;
                var laypage = layui.laypage;
                tableData = [{ "number": 7990, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 7669, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 8834, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 8043, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 6017, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 3747, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 3790, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 5630, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 1541, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 7608, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 5063, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 7289, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 6639, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }, { "number": 4531, "type": "单票", "detail": { "name": "隆里古城成人票", "desc0": "隆里古城", "desc1": "欢乐风火轮 太空梭", "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用", "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。", "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。", "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。", "desc6": "此产品由XXX供应商提供，联系电话137123458920" }, "theme": "极限运动", "ticket": "成人票", "stock": "89", "date": "2018-3-18", "price": "￥99", "count": "1" }]
                var tableOption = {
                    elem: '#sell-table'
                    , skin: 'line'
                    , limit: 5
                    , data: tableData//数据
                    , page: false //开启分页
                    , cols: [[ //表头
                        { field: 'number', title: '产品编号', sort: true }
                        , { field: 'type', title: '类别', }
                        , { field: 'detail', title: '产品名称', templet: '#nameTpl' }
                        , { field: 'theme', title: '主题', }
                        , { field: 'ticket', title: '票种', }
                        , { field: 'stock', title: '库存', sort: true }
                        , { field: 'date', title: '游玩日期', templet: '#dateTpl' }
                        , { field: 'price', title: '单价', templet: '#priceTpl' }
                        , { field: 'count', title: '购买数量', templet: '#countTpl', minWidth: 100 }
                        , { title: '操作', toolbar: '#tableTool', minWidth: 100 }
                    ]]
                }
                var tableOption2 = {
                    elem: '#sell-table2'
                    , skin: 'line'
                    , limit: 4
                    , data: tableData//数据
                    , page: false //开启分页
                    , cols: [[ //表头
                        { field: 'number', title: '产品编号', sort: true }
                        , { field: 'type', title: '类别', }
                        , { field: 'detail', title: '产品名称', templet: '#nameTpl' }
                        , { field: 'theme', title: '主题', }
                        , { field: 'ticket', title: '票种', }
                        , { field: 'stock', title: '库存', sort: true }
                        , { field: 'date', title: '游玩日期', templet: '#dateTpl' }
                        , { field: 'price', title: '单价', templet: '#priceTpl' }
                        , { field: 'count', title: '购买数量', templet: '#countTpl', minWidth: 100 }
                        , { title: '操作', toolbar: '#tableTool', minWidth: 100 }
                    ]]
                }
                var tableIns = table.render(tableOption);
                var table2 = table.render(tableOption2)
                // $.get('https://www.easy-mock.com/mock/5a015fca36a23b429ea956a0/ceshi/table', function(result){
                //     tableOption.data=result.data
                //     tableIns.reload(tableOption)
                // });
                //分页
                laypage.render({
                    elem: 'page'
                    , count: 100
                    , layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
                    , jump: function (obj) {
                        console.log(obj)
                    }
                });
                //table事件
                table.on('tool(table)', function (obj) {
                    var data = obj.data; //获得当前行数据
                    var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
                    var tr = obj.tr; //获得当前行 tr 的DOM对象
                    //展开详情
                    if (layEvent == 'detail') {
                        if (!tr.next().hasClass('tr-detail')) {
                            var detailTpl = detail.innerHTML
                            laytpl(detailTpl).render(data, function (html) {
                                tr.after(html)
                            });
                        }
                    }

                    //显示购买详情
                    if (layEvent == 'showTip') {
                        var bodyTpl = drawerBodyTpl.innerHTML
                        currentRow = data
                        laytpl(bodyTpl).render(data, function (html) {
                            $('.drawer-body').html(html)
                        });
                        $('.ui-shade').addClass('show')
                        $('.ui-drawer').css('right', '0px')
                        $('.ui-shade').bind('mousewheel', function (e) {
                            e.preventDefault();
                        })
                        $('.ui-drawer').bind('mousewheel', function (e) {
                            e.preventDefault();
                        })
                    }
                    //打开日历
                    if (layEvent == 'openCalendar') {
                        var calendar = new common.uiCalendar()
                        calendar.init({
                            id: data.number,//本次打开日历的标识符，用于返回选择结果后的下一步操作 这里示例使用了表格行的编号作为标识符
                            currentDate: data.date,//默认月份
                            loading: '正在获取价格数据',//请求后端价格数据时的loading文字，默认不显示
                            httpUrl: 'https://www.easy-mock.com/mock/5a015fca36a23b429ea956a0/ceshi/getPrice?date={d}',//价格数据接口 其中{d}为日期参数 如2018-4-18，表示获取2018年4月的价格数据
                            objectName: 'data',//获取数据后，哪个字段名为数据主体 默认data
                            dateField: 'date',//数据主体中哪个字段名表示日期 默认date
                            priceField: 'price',//数据主体中哪个字段名表示价格 默认price
                            stockField: 'stock',//数据中体中哪个字段名表示库存 默认stock
                            onSelect: function (res) {
                                tableOption.data = tableData.map(function (item) {
                                    if (item.number == res.id) {
                                        item.date = res.fullDate
                                        item.price = '￥' + res.price
                                    }
                                    return item
                                })
                                tableIns.reload(tableOption)
                                table2.reload(tableOption2)
                            }
                        })
                    }
                });
            })
            //关闭表格中的详情
            function closeDetail(e) {
                $(e).parents('tr').remove()
            }
            //关闭预定详情右侧栏
            function cancel(e) {
                $('.ui-shade').removeClass('show')
                $('.ui-drawer').css('right', '-260px')
            }
            //提交订单
            function submit() {
                //所选产品信息 可用window.location拼接参数跳转到下一页
                console.log(currentRow)
                window.location.href = "ticket-pay.html?id=" + currentRow.number
            }
            //接受counter的变化
            window.counter = function (data) {
                tableData.forEach(function (item) {
                    if (item.number == data.id) {
                        item.count = data.value
                    }
                })


            }


        </script>


</body></html>