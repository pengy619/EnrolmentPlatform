<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="../../framework/layui/css/layui.css"> <link rel="stylesheet" href="https://at.alicdn.com/t/font_580083_hx34356fmwzmpldi.css"> <link rel="stylesheet" href="../../css/main.css"> <link rel="stylesheet" href="../../css/replace.css">
        <title>支付</title>
</head>

<body>
    <div class="container">
        <div class="top-wrap"><div class="logo">
    <img src="../../images/home_logo.png" alt="智联智行">
</div>
<div class="nav">
    <a href="../sell/sell-tickets.html" id="product">
        <i class="iconfont icon-chanpinpeizhi"></i>
        销售
    </a>
    <a href="../order/order-tickets.html" id="order">
        <i class="iconfont icon-dingdan"></i>
        订单
    </a>
    <a href="../finance/finance-list.html" id="finance">
        <i class="iconfont icon-baobiaotongji"></i>
        财务
    </a>
    <a href="../setting/roles-setting.html" id="setting">
        <i class="iconfont icon-shezhi"></i>
        设置
    </a>
</div></div>
        <div class="body-wrap">
            <div class="left-wrap">
                <ul class="layui-nav layui-nav-tree" lay-filter="test">
                    <li class="layui-nav-item">
                        <a href="order-list.html">
                            <i class="iconfont icon-nongchanpin"></i>
                            <span>票务销售</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="container-wrap">
                <div class="breadcrumb-bar">
                    <div class="collapse-button" id="collapse-button">
                        <i class="layui-icon"></i>
                    </div>
                    <div class="breadcrumb-wrap">
                        <span class="layui-breadcrumb">
                            <a>
                                <cite>工作台</cite>
                            </a>
                            <a>
                                <cite>销售</cite>
                            </a>
                            <a>
                                <cite>订单支付</cite>
                            </a>
                        </span>
                    </div>
                    <div class="user-tools">
    <a href=""><i class="iconfont icon-dingdan"></i><span class="layui-badge">3</span></a>
    <a href=""><i class="iconfont icon-xiaoxi"></i></a>
    <a href=""><i class="iconfont icon-iconfontlipinduihuanbangzhu"></i></a>
    <span class="account">
        135*****753 <i class="layui-icon">&#xe625;</i> 
        <dl class="user-dropdown">
            <dd>
                <a href="">个人信息</a>
            </dd>
            <dd>
                <a href="">安全退出</a>
            </dd>
        </dl>
    </span>
</div>
                </div>
                <div class="main-wrap">
                    <div class="panel">
                        <div class="panel-title">
                            产品信息
                        </div>
                        <div class="panel-body">
                            <table id="product-table" lay-filter="table" class="tr-no-position"></table>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="panel-title">
                            付款信息
                        </div>
                        <div class="panel-body">
                            <div class="info-cell no-padding">
                                <div class="row">
                                    <div class="item">
                                        <span class="label">付款方式</span>
                                        <span class="block">
                                            <div class="layui-btn-group">
                                                <button class="layui-btn layui-btn-sm layui-btn-blue" onclick="changePayType(this,1)">现金支付</button>
                                                <button class="layui-btn layui-btn-sm layui-btn-primary" onclick="changePayType(this,2)">微信支付</button>
                                                <button class="layui-btn layui-btn-sm layui-btn-primary" onclick="changePayType(this,3)">支付宝支付</button>
                                            </div>
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="item">
                                        <span class="label">待支付金额</span>
                                        <span class="text pro-color">
                                            ￥99
                                        </span>
                                    </div>
                                </div>
                                <div class="row" id="type1">
                                    <div class="item">
                                        <span class="label"></span>
                                        <span class="block">
                                            <button class="layui-btn  layui-btn-warm" onclick="success()">已支付，并出票</button>
                                            <button class="layui-btn  layui-btn-primary">返回</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     <script src="../../framework/layui/layui.js"></script> <script src="../../js/common.js"></script>
        <!--表格产品名称模板-->
        <script type="text/html" id="nameTpl">
        <a href="javascript:;" class="layui-table-link" lay-event="detail">{{d.detail.name}}</a>
    </script>
        <!--表格价格模板-->
        <script type="text/html" id="priceTpl">
        <span class="pro-color">￥{{d.total}}</span>
    </script>
        <!-- 微信支付弹窗 -->
        <div id="type2" style="display: none" class="row">
            <div class="item">
                <span class="label"></span>
                <span class="block">
                    <div class="qrcode">
                        <img src="https://qr.api.cli.im/qr?data=%25E6%25B5%258B%25E8%25AF%2595&level=H&transparent=false&bgcolor=%23ffffff&forecolor=%23000000&blockpixel=12&marginblock=1&logourl=&size=280&kid=cliim&key=268f3bbe7363b1da9057fef12bf5df76" alt="">
                        <p>微信扫码支付</p>
                    </div>
                </span>
            </div>
        </div>
        <!-- 支付宝支付弹窗 -->
        <div id="type3" style="display: none" class="row">
            <div class="item">
                <span class="label"></span>
                <span class="block">
                    <div class="qrcode">
                        <img src="https://qr.api.cli.im/qr?data=%25E6%25B5%258B%25E8%25AF%2595&level=H&transparent=false&bgcolor=%23ffffff&forecolor=%23000000&blockpixel=12&marginblock=1&logourl=&size=280&kid=cliim&key=268f3bbe7363b1da9057fef12bf5df76" alt="">
                        <p>支付宝扫码支付</p>
                    </div>
                </span>
            </div>
        </div>
        <!--支付成功弹窗模板-->
        <div class="success-modal">
            <div class="icon">
                <i class="layui-icon"></i>
            </div>
            <p class="strong">客户已成功支付￥99.00，系统将立即出票</p>
            <p>产品名称：隆里古城成人票，数量：1</p>
            <p>订单号：A123456789</p>
        </div>
        <script>
            var tableData = [], currentRow = {}
            layui.use(['jquery', 'table', 'laytpl', 'layer'], function () {
                var table = layui.table;
                $ = layui.$;
                var laytpl = layui.laytpl;
                layer = layui.layer;
                tableData = [{
                    "number": 2145,
                    "type": "单票",
                    "detail": {
                        "name": "隆里古城成人票",
                        "desc0": "隆里古城",
                        "desc1": "欢乐风火轮 太空梭",
                        "desc2": "最晚需在【出行当天23:45】前购买，预订成功后可立即使用",
                        "desc3": "黄果树瀑布景区门票1张（不含观光车）、龙宫景区门票1张、龙宫船票1张。",
                        "desc4": "费用不含：黄果树景区观光车50元/人、黄果树双程扶梯50元/人、黄果树单程扶梯30元/人、黄果树天星桥索道10元/人、龙宫景区观光车20元/人、龙宫电梯35元/人、其他自主购物消费。",
                        "desc5": "黎平直达隆里的班车只有两趟，最方便的是坐任何一班经过熬市的车，在熬市下车后有很多车可继续转乘，只要2元。锦屏过来的车更多一些，锦屏-熬市的车会路过隆里。",
                        "desc6": "此产品由XXX供应商提供，联系电话137123458920"
                    },
                    "theme": "极限运动",
                    "ticket": "成人票",
                    "stock": "89",
                    "date": "2018-3-18",
                    "price": "99",
                    "count": "1",
                    "total": "99"
                }]
                var tableOption = {
                    elem: '#product-table'
                    , skin: 'line'
                    , limit: 20
                    , data: tableData//数据
                    , page: false //开启分页
                    , cols: [[ //表头
                        { field: 'number', title: '产品编号', sort: true }
                        , { field: 'type', title: '类别', }
                        , { field: 'detail', title: '产品名称', templet: '#nameTpl' }
                        , { field: 'theme', title: '主题', }
                        , { field: 'ticket', title: '票种', }
                        , { field: 'stock', title: '库存', sort: true }
                        , { field: 'date', title: '游玩日期', }
                        , { field: 'price', title: '单价', }
                        , { field: 'count', title: '购买数量', minWidth: 100 }
                        , { title: 'total', title: '金额小计', templet: '#priceTpl', minWidth: 100 }
                    ]]
                }

                var tableIns = table.render(tableOption);

            })

            //切换支付方式
            function changePayType(e, type) {
                $(e).removeClass('layui-btn-primary')
                $(e).addClass('layui-btn-blue')
                $(e).siblings().removeClass('layui-btn-blue')
                $(e).siblings().addClass('layui-btn-primary')
                $('#type1').hide()
                if (type == 1) {
                    $('#type1').show()
                }
                if (type == 2) {
                    layer.open({
                        type: 1,
                        title: '微信支付',
                        btn: ['支付完成', '取消'],
                        area: ['400px'], //宽高
                        content: $('#type2'),
                        yes: function () {
                            return false
                        },
                        btn2: function () {

                        }
                    });
                }
                if (type == 3) {
                    layer.open({
                        type: 1,
                        title: '支付宝支付',
                        btn: ['支付完成', '取消'],
                        area: ['400px'], //宽高
                        content: $('#type3'),
                        yes: function () {
                            return false
                        },
                        btn2: function () {

                        }
                    });
                }
            }

            //下单成功
            function success() {
                layer.open({
                    type: 1,
                    shade: 0.3,
                    title: '提示', //不显示标题
                    scrollbar: false,//屏蔽滚动
                    area: '550px',
                    content: $('.success-modal'),
                    btn: ['继续购物', '查看订单'],
                    yes: function () {
                        console.log('继续购物')
                    },
                    btn2: function () {
                        console.log('查看订单')
                    }
                });
            }
        </script>


</body></html>